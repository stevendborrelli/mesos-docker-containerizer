#!/usr/bin/env bash

#      _            _                                  _        _                 _
#   __| | ___   ___| | _____ _ __       ___ ___  _ __ | |_ __ _(_)_ __   ___ _ __(_)_______ _ __
#  / _` |/ _ \ / __| |/ / _ \ '__|____ / __/ _ \| '_ \| __/ _` | | '_ \ / _ \ '__| |_  / _ \ '__|
# | (_| | (_) | (__|   <  __/ | |_____| (_| (_) | | | | || (_| | | | | |  __/ |  | |/ /  __/ |
#  \__,_|\___/ \___|_|\_\___|_|        \___\___/|_| |_|\__\__,_|_|_| |_|\___|_|  |_/___\___|_|
#

set -e

CONFIG_FILE=/etc/default/containerizer

#bin/setup

# Source our configuration
[ -f ${CONFIG_FILE} ] && source ${CONFIG_FILE}


[ -f ${CONTAINERIZER_VENV_PATH}/bin/activate ] && source ${CONTAINERIZER_VENV_PATH}/bin/activate


# We run as sudo here because to modify cgroup properties, we must be root.
sudo -E ${CONTAINERIZER_VENV_PATH}/bin/python -m containerizer.__main__ $@
